<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‚ú® Felices XV, Dana ‚ú®</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üëë</text></svg>">
    
    <!-- Fuentes premium -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --rosa-claro: #fff0f5;
            --rosa-medio: #ffb6c1;
            --rosa-fuerte: #ff69b4;
            --dorado: #ffd700;
            --dorado-oscuro: #daa520;
            --blanco: #ffffff;
            --negro: #333333;
            --texto: #5a3a4a;
            --sombra: rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #ffeff6 0%, #fff9f0 100%);
            color: var(--texto);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Fondos decorativos */
        .fondo-flores {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.15;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 182, 193, 0.3) 0%, transparent 20%),
                radial-gradient(circle at 90% 30%, rgba(255, 182, 193, 0.3) 0%, transparent 20%),
                radial-gradient(circle at 50% 80%, rgba(255, 182, 193, 0.3) 0%, transparent 20%);
        }
        
        /* Contenedor principal */
        .container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }
        
        /* Pantalla de inicio */
        .pantalla {
            background-color: var(--blanco);
            border-radius: 30px;
            box-shadow: 0 20px 60px var(--sombra);
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
            transition: transform 0.5s ease, opacity 0.5s ease;
            border: 1px solid rgba(255, 182, 193, 0.2);
        }
        
        .pantalla-oculta {
            display: none;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .pantalla-activa {
            display: block;
            opacity: 1;
            transform: translateY(0);
            animation: aparecer 1s ease forwards;
        }
        
        /* Dise√±o de sobre */
        .sobre {
            position: relative;
            width: 100%;
            max-width: 300px;
            margin: 0 auto 40px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .sobre:hover {
            transform: scale(1.05);
        }
        
        .sobre-cuerpo {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--rosa-medio) 0%, var(--rosa-fuerte) 100%);
            border-radius: 15px;
            position: relative;
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.3);
            overflow: hidden;
        }
        
        .sobre-tapa {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--rosa-claro) 0%, var(--rosa-medio) 100%);
            border-radius: 15px;
            position: absolute;
            top: 0;
            left: 0;
            transform-origin: top;
            transform: rotateX(0deg);
            transition: transform 1s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(255, 105, 180, 0.2);
        }
        
        .sobre-abierto .sobre-tapa {
            transform: rotateX(-180deg);
        }
        
        .sobre-interior {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: var(--blanco);
            font-family: 'Dancing Script', cursive;
            padding: 20px;
        }
        
        .corazon-sobre {
            font-size: 3.5rem;
            color: var(--rosa-fuerte);
            margin-bottom: 10px;
            animation: latido 2s infinite;
            filter: drop-shadow(0 0 5px rgba(255, 105, 180, 0.5));
        }
        
        .texto-sobre {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--texto);
            text-shadow: 0 2px 5px rgba(255, 255, 255, 0.7);
        }
        
        .subtitulo-sobre {
            font-size: 1rem;
            margin-top: 10px;
            color: var(--texto);
            opacity: 0.8;
            max-width: 80%;
            line-height: 1.4;
        }
        
        /* Bot√≥n de acci√≥n */
        .btn-principal {
            background: linear-gradient(135deg, var(--rosa-fuerte) 0%, var(--dorado) 100%);
            color: var(--blanco);
            border: none;
            border-radius: 50px;
            padding: 18px 40px;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(255, 105, 180, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin: 30px auto 20px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .btn-principal::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.7s ease;
            z-index: -1;
        }
        
        .btn-principal:hover::before {
            left: 100%;
        }
        
        .btn-principal:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 105, 180, 0.5);
        }
        
        .btn-principal:active {
            transform: translateY(0);
        }
        
        /* Contenido de la carta */
        .corona-titulo {
            font-size: 2.8rem;
            color: var(--dorado-oscuro);
            margin-bottom: 10px;
            filter: drop-shadow(0 0 3px rgba(218, 165, 32, 0.5));
        }
        
        .titulo-principal {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            color: var(--rosa-fuerte);
            margin: 20px 0;
            text-align: center;
            line-height: 1.2;
            position: relative;
        }
        
        .titulo-principal::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--dorado), transparent);
        }
        
        .poema-contenedor {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 20px;
            padding: 25px;
            margin: 30px 0;
            border-left: 5px solid var(--rosa-fuerte);
            box-shadow: 0 8px 25px rgba(255, 182, 193, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .poema-contenedor::before {
            content: "‚ùù";
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 4rem;
            color: rgba(255, 182, 193, 0.2);
            font-family: serif;
            line-height: 1;
        }
        
        .poema {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            line-height: 1.6;
            color: var(--texto);
            text-align: center;
            font-style: italic;
            position: relative;
            z-index: 1;
        }
        
        .texto-carta {
            font-size: 1.1rem;
            line-height: 1.7;
            margin: 25px 0;
            text-align: justify;
            padding: 0 10px;
        }
        
        .destacado {
            background: linear-gradient(120deg, rgba(255, 182, 193, 0.2) 0%, rgba(255, 215, 0, 0.2) 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            text-align: center;
            border: 1px solid rgba(255, 182, 193, 0.3);
        }
        
        .firma {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            color: var(--rosa-fuerte);
            text-align: right;
            margin-top: 40px;
            padding-right: 20px;
            position: relative;
        }
        
        .firma::before {
            content: '';
            position: absolute;
            top: 50%;
            right: 0;
            width: 150px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--rosa-medio));
        }
        
        /* Controles de m√∫sica */
        .controles-musica {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0 20px;
            flex-wrap: wrap;
        }
        
        .btn-musica {
            background: var(--blanco);
            border: 2px solid var(--rosa-medio);
            border-radius: 50px;
            padding: 12px 25px;
            font-size: 1rem;
            color: var(--rosa-fuerte);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }
        
        .btn-musica:hover {
            background: var(--rosa-claro);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 182, 193, 0.3);
        }
        
        .btn-musica.activo {
            background: var(--rosa-fuerte);
            color: var(--blanco);
        }
        
        .volumen-contenedor {
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(255, 255, 255, 0.7);
            padding: 15px 20px;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .icono-volumen {
            color: var(--rosa-fuerte);
            font-size: 1.3rem;
        }
        
        .control-volumen {
            flex: 1;
            height: 8px;
            background: rgba(255, 182, 193, 0.3);
            border-radius: 10px;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .control-volumen::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--rosa-fuerte);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 105, 180, 0.5);
        }
        
        /* Animaciones de confeti */
        .confeti {
            position: fixed;
            width: 15px;
            height: 15px;
            opacity: 0;
            z-index: 9999;
            pointer-events: none;
        }
        
        .confeti-rosa { background-color: var(--rosa-fuerte); }
        .confeti-dorado { background-color: var(--dorado); }
        .confeti-blanco { background-color: var(--blanco); }
        
        /* Animaciones */
        @keyframes aparecer {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes latido {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }
        
        @keyframes flotar {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(10deg);
            }
        }
        
        @keyframes brillo {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }
        
        /* Responsive */
        @media (max-width: 600px) {
            html {
                font-size: 14px;
            }
            
            .pantalla {
                padding: 30px 20px;
            }
            
            .titulo-principal {
                font-size: 2.8rem;
            }
            
            .poema {
                font-size: 1.2rem;
            }
            
            .btn-principal {
                padding: 16px 30px;
                font-size: 1.2rem;
            }
        }
        
        @media (max-width: 400px) {
            .titulo-principal {
                font-size: 2.4rem;
            }
            
            .poema {
                font-size: 1.1rem;
            }
            
            .controles-musica {
                gap: 10px;
            }
            
            .btn-musica {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
        }
        
        /* Elementos decorativos adicionales */
        .elemento-decorativo {
            position: absolute;
            z-index: 1;
            opacity: 0.7;
            pointer-events: none;
        }
        
        .flor {
            font-size: 2rem;
            color: var(--rosa-fuerte);
            animation: flotar 6s infinite ease-in-out;
        }
        
        .estrella {
            font-size: 1.5rem;
            color: var(--dorado);
            animation: brillo 3s infinite ease-in-out;
        }
    </style>
</head>
<body>
    <!-- Fondo decorativo -->
    <div class="fondo-flores"></div>
    
    <!-- Elementos decorativos flotantes -->
    <div class="elemento-decorativo flor" style="top: 10%; left: 5%;">üå∏</div>
    <div class="elemento-decorativo estrella" style="top: 15%; right: 8%;">‚ú®</div>
    <div class="elemento-decorativo flor" style="bottom: 20%; left: 10%;">üå∫</div>
    <div class="elemento-decorativo estrella" style="bottom: 15%; right: 5%;">‚≠ê</div>
    <div class="elemento-decorativo flor" style="top: 50%; left: 3%;">üå∑</div>
    
    <div class="container">
        <!-- Pantalla de inicio -->
        <div id="pantalla-inicio" class="pantalla pantalla-activa">
            <div class="sobre" id="sobre">
                <div class="sobre-cuerpo">
                    <div class="sobre-tapa">
                        <div class="corazon-sobre">üíñ</div>
                        <div class="texto-sobre">Para Dana</div>
                        <div class="subtitulo-sobre">Toca el sobre para abrir esta carta especial</div>
                    </div>
                    <div class="sobre-interior">
                        <div style="font-size: 1.5rem; margin-bottom: 10px;">üëë</div>
                        <div style="font-size: 1.3rem; font-weight: 700;">¬°Felices XV!</div>
                    </div>
                </div>
            </div>
            
            <h2 style="font-family: 'Playfair Display', serif; font-size: 1.8rem; color: var(--texto); margin-bottom: 15px;">
                Una carta especial para tu d√≠a
            </h2>
            
            <p style="font-size: 1.1rem; line-height: 1.6; margin-bottom: 30px; color: var(--texto); opacity: 0.9; max-width: 90%; margin-left: auto; margin-right: auto;">
                Esta no es una p√°gina cualquiera. Es un regalo digital hecho con cari√±o para celebrar tus quince a√±os, Dana.
            </p>
            
            <button class="btn-principal" id="btn-abrir">
                <i class="fas fa-gift"></i>
                ¬°Abrir Carta!
            </button>
            
            <p style="font-size: 0.9rem; margin-top: 25px; color: var(--texto); opacity: 0.7; font-style: italic;">
                Recomendado: ¬°Disfruta Esta Fiesta Al Maximo! 
            </p>
        </div>
        
        <!-- Pantalla de la carta -->
        <div id="pantalla-carta" class="pantalla pantalla-oculta">
            <div class="corona-titulo">üëë</div>
            
            <h1 class="titulo-principal">Felices XV, Dana</h1>
            
            <div class="poema-contenedor">
                <div class="poema">
                    Quince a√±os y el mundo se abre ante ti,<br>
                    sue√±os que despiertan, ganas de vivir.<br>
                    Que nunca se apague tu forma de sentir,<br>
                    ni la luz tan bonita que hay dentro de ti.
                </div>
            </div>
            
            <div class="texto-carta">
                <p>Hoy celebras quince a√±os, un momento que marca, que se queda guardado como un recuerdo eterno.Nuestra amistad sera eterna , risas, llamadas largas, juegos compartidos, peque√±os instantes que se volvieron memoria.</p>
                
                <p>Hoy  escribo para aumentar nuestra mi amistad , para desearte paz, alegr√≠a y un camino lleno de cosas bonitas. Que esta nueva etapa te trate con ternura, y que siempre recuerdes lo valiosa que eres.</p>
                
                <p>Baila, r√≠e, disfruta, abraza fuerte. Que esta noche sea luz, y que el futuro te sonr√≠a siempre.</p>
            </div>
            
            <div class="destacado">
                <h3 style="font-family: 'Dancing Script', cursive; font-size: 2.2rem; color: var(--rosa-fuerte); margin-bottom: 15px;">
                    ¬°Sonr√≠ele a la vida!
                </h3>
                <p style="font-size: 1.1rem;">Que cada d√≠a encuentres razones para sonre√≠r, porque la vida es m√°s bonita cuando la afrontas con alegr√≠a y gratitud.</p>
            </div>
            
            <div class="texto-carta">
                <p>Espero que este d√≠a est√© lleno de momentos inolvidables, rodeada de quienes te quieren y celebran contigo este momento tan especial.</p>
                
                <p>Recuerda que hoy no solo cumples a√±os, sino que comienzas una nueva etapa llena de posibilidades. ¬°Aprovecha cada oportunidad y vive intensamente!</p>
            </div>
            
            <div style="text-align: center; margin: 40px 0;">
                <div style="font-family: 'Dancing Script', cursive; font-size: 3.5rem; color: var(--dorado-oscuro); line-height: 1; animation: latido 2s infinite;">
                    Feliz Quinceeeeeeeee
                </div>
                <div style="font-size: 1.8rem; margin-top: 10px;">‚ú®üëëüíñ</div>
            </div>
            
            <div class="firma">Con cari√±o,<br>Angel</div>
            
            <!-- Controles de m√∫sica -->
            <div class="controles-musica">
                <button class="btn-musica" id="btn-cancion1">
                    <i class="fas fa-music"></i>
                    Sonr√≠ele a la vida
                </button>
                <button class="btn-musica" id="btn-cancion2">
                    <i class="fas fa-music"></i>
                    Ya no crezcas m√°s
                </button>
                <button class="btn-musica" id="btn-silenciar">
                    <i class="fas fa-volume-mute"></i>
                    Silenciar
                </button>
            </div>
            
            <div class="volumen-contenedor">
                <i class="fas fa-volume-up icono-volumen"></i>
                <input type="range" min="0" max="100" value="70" class="control-volumen" id="volumen">
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn-principal" id="btn-confeti" style="padding: 14px 30px; font-size: 1.1rem;">
                    <i class="fas fa-birthday-cake"></i>
                    ¬°Celebremos!
                </button>
            </div>
        </div>
    </div>

    <!-- Audio para la m√∫sica (soluci√≥n compatible con iOS) -->
    <audio id="audio-player" loop>
        Tu navegador no soporta el elemento de audio.
    </audio>
    
    <!-- Elemento oculto para interactuar con m√∫sica en iOS -->
    <div id="ios-audio-trigger" style="position: absolute; width: 1px; height: 1px; overflow: hidden; opacity: 0;"></div>

    <script>
        // Elementos del DOM
        const pantallaInicio = document.getElementById('pantalla-inicio');
        const pantallaCarta = document.getElementById('pantalla-carta');
        const btnAbrir = document.getElementById('btn-abrir');
        const sobre = document.getElementById('sobre');
        const audioPlayer = document.getElementById('audio-player');
        const btnCancion1 = document.getElementById('btn-cancion1');
        const btnCancion2 = document.getElementById('btn-cancion2');
        const btnSilenciar = document.getElementById('btn-silenciar');
        const controlVolumen = document.getElementById('volumen');
        const btnConfeti = document.getElementById('btn-confeti');
        const iosAudioTrigger = document.getElementById('ios-audio-trigger');
        
const CANCION1_URL = './Sonriele.mp3'; // Daddy Yankee
const CANCION2_URL = './Dana.mp3';     // Tercer Cielo
        
        // Variables de estado
        let cancionActual = 1;
        let volumen = 0.7;
        let audioIniciado = false;
        
        // Funci√≥n para manejar la reproducci√≥n de audio en iOS
        function iniciarAudioIOS() {
            if (!audioIniciado) {
                // Crear un contexto de audio
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                const audioContext = new AudioContext();
                
                // Crear un nodo de oscilador silencioso
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                // Configurar para que sea inaudible
                gainNode.gain.setValueAtTime(0.001, audioContext.currentTime);
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Iniciar y detener r√°pidamente
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.1);
                
                // Restaurar el volumen del reproductor de audio
                audioPlayer.volume = volumen;
                audioIniciado = true;
                
                console.log('Audio de iOS inicializado');
            }
        }
        
        // Inicializar la reproducci√≥n de audio en iOS
        function inicializarAudio() {
            // Para iOS, necesitamos una interacci√≥n del usuario
            document.addEventListener('touchstart', iniciarAudioIOS, { once: true });
            document.addEventListener('click', iniciarAudioIOS, { once: true });
            
            // Tambi√©n intentar con el bot√≥n de abrir
            btnAbrir.addEventListener('click', iniciarAudioIOS);
            sobre.addEventListener('click', iniciarAudioIOS);
            
            // Configurar el volumen inicial
            audioPlayer.volume = volumen;
        }
        
        // Funci√≥n para cambiar de pantalla
        function abrirCarta() {
            // Animar el sobre
            sobre.classList.add('sobre-abierto');
            
            // Cambiar de pantalla despu√©s de la animaci√≥n
            setTimeout(() => {
                pantallaInicio.classList.remove('pantalla-activa');
                pantallaInicio.classList.add('pantalla-oculta');
                
                pantallaCarta.classList.remove('pantalla-oculta');
                pantallaCarta.classList.add('pantalla-activa');
                
                // Reproducir la primera canci√≥n
                reproducirCancion(1);
                
                // Crear confeti
                crearConfeti();
                
                // Scroll al inicio de la carta
                window.scrollTo(0, 0);
            }, 800);
        }
        
        // Funci√≥n para reproducir una canci√≥n
        function reproducirCancion(numero) {
            // Actualizar estado
            cancionActual = numero;
            
            // Actualizar botones
            btnCancion1.classList.remove('activo');
            btnCancion2.classList.remove('activo');
            btnSilenciar.classList.remove('activo');
            
            if (numero === 1) {
                btnCancion1.classList.add('activo');
                audioPlayer.src = CANCION1_URL;
                console.log('Reproduciendo: Sonr√≠ele a la vida');
            } else if (numero === 2) {
                btnCancion2.classList.add('activo');
                audioPlayer.src = CANCION2_URL;
                console.log('Reproduciendo: Ya no crezcas m√°s');
            }
            
            // Reproducir
            audioPlayer.play().catch(e => {
                console.log('Error al reproducir audio:', e);
                // Intentar inicializar audio para iOS
                iniciarAudioIOS();
                
                // Intentar nuevamente despu√©s de un breve retraso
                setTimeout(() => {
                    audioPlayer.play().catch(e2 => console.log('Error persistente:', e2));
                }, 300);
            });
        }
        
        // Funci√≥n para silenciar/activar sonido
        function alternarSilencio() {
            if (audioPlayer.muted) {
                audioPlayer.muted = false;
                btnSilenciar.classList.remove('activo');
                btnSilenciar.innerHTML = '<i class="fas fa-volume-mute"></i> Silenciar';
                
                // Reactivar la canci√≥n actual si est√° pausada
                if (audioPlayer.paused) {
                    audioPlayer.play().catch(e => console.log('Error al reanudar:', e));
                }
            } else {
                audioPlayer.muted = true;
                btnSilenciar.classList.add('activo');
                btnSilenciar.innerHTML = '<i class="fas fa-volume-up"></i> Activar';
            }
        }
        
        // Funci√≥n para crear confeti
        function crearConfeti() {
            const colores = ['confeti-rosa', 'confeti-dorado', 'confeti-blanco'];
            
            for (let i = 0; i < 150; i++) {
                const confeti = document.createElement('div');
                confeti.className = `confeti ${colores[Math.floor(Math.random() * colores.length)]}`;
                
                // Posici√≥n aleatoria
                confeti.style.left = `${Math.random() * 100}vw`;
                confeti.style.top = `-20px`;
                
                // Tama√±o aleatorio
                const size = Math.random() * 15 + 5;
                confeti.style.width = `${size}px`;
                confeti.style.height = `${size}px`;
                
                // Rotaci√≥n aleatoria
                confeti.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                // Animaci√≥n
                const duration = Math.random() * 3 + 2;
                const delay = Math.random() * 2;
                
                confeti.style.animation = `
                    confeti-caida ${duration}s ease-in ${delay}s forwards,
                    confeti-giro ${duration/2}s linear ${delay}s infinite
                `;
                
                // Definir las animaciones de confeti
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes confeti-caida {
                        0% {
                            opacity: 1;
                            transform: translateY(0) rotate(0deg);
                        }
                        100% {
                            opacity: 0;
                            transform: translateY(100vh) rotate(${Math.random() * 720}deg);
                        }
                    }
                    
                    @keyframes confeti-giro {
                        0% {
                            transform: rotate(0deg);
                        }
                        100% {
                            transform: rotate(360deg);
                        }
                    }
                `;
                
                document.head.appendChild(style);
                document.body.appendChild(confeti);
                
                // Eliminar despu√©s de la animaci√≥n
                setTimeout(() => {
                    if (confeti.parentNode) {
                        confeti.parentNode.removeChild(confeti);
                    }
                }, (duration + delay) * 1000);
            }
        }
        
        // Event Listeners
        btnAbrir.addEventListener('click', abrirCarta);
        sobre.addEventListener('click', abrirCarta);
        
        btnCancion1.addEventListener('click', () => reproducirCancion(1));
        btnCancion2.addEventListener('click', () => reproducirCancion(2));
        btnSilenciar.addEventListener('click', alternarSilencio);
        
        controlVolumen.addEventListener('input', (e) => {
            volumen = e.target.value / 100;
            audioPlayer.volume = volumen;
            
            // Si est√° silenciado y ajustamos el volumen, quitar silencio
            if (audioPlayer.muted && volumen > 0) {
                audioPlayer.muted = false;
                btnSilenciar.classList.remove('activo');
                btnSilenciar.innerHTML = '<i class="fas fa-volume-mute"></i> Silenciar';
            }
        });
        
        btnConfeti.addEventListener('click', () => {
            crearConfeti();
            
            // Efecto de bot√≥n
            btnConfeti.innerHTML = '<i class="fas fa-birthday-cake"></i> ¬°Yuju!';
            setTimeout(() => {
                btnConfeti.innerHTML = '<i class="fas fa-birthday-cake"></i> ¬°Celebremos!';
            }, 1500);
        });
        
        // Inicializar cuando se carga la p√°gina
        window.addEventListener('DOMContentLoaded', () => {
            inicializarAudio();
            
            // Intentar reproducir m√∫sica autom√°ticamente (puede no funcionar en algunos navegadores)
            setTimeout(() => {
                if (!audioIniciado) {
                    console.log('Intentando inicializar audio autom√°ticamente...');
                    iniciarAudioIOS();
                }
            }, 1000);
            
            // Para depuraci√≥n
            console.log('P√°gina cargada correctamente');
            console.log('Dispositivo:', /iPhone|iPad|iPod/.test(navigator.userAgent) ? 'iOS' : 'Otro');
        });
        
        // Manejar la visibilidad de la p√°gina para pausar/reanudar m√∫sica
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                // Pausar cuando la pesta√±a no est√° activa
                if (!audioPlayer.paused) {
                    audioPlayer.pause();
                }
            } else {
                // Reanudar cuando la pesta√±a vuelve a estar activa
                if (audioPlayer.paused && !audioPlayer.muted && audioPlayer.src) {
                    audioPlayer.play().catch(e => console.log('Error al reanudar:', e));
                }
            }
        });
    </script>
</body>
</html>
